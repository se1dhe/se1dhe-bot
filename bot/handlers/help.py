# -*- coding: utf-8 -*-
from aiogram import Dispatcher, types
from aiogram.filters import Command
from config.settings import DEFAULT_LANGUAGE
import logging

logger = logging.getLogger(__name__)


async def cmd_help(message: types.Message):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø—Ä–∞–≤–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
    """
    # –ü–æ–ª—É—á–∞–µ–º —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    language = message.from_user.language_code or DEFAULT_LANGUAGE

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await message.answer(_get_help_text(language))


def _get_help_text(lang: str) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∫–∏

    Args:
        lang (str): –ö–æ–¥ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    Returns:
        str: –¢–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∫–∏
    """
    # –ï—Å–ª–∏ —è–∑—ã–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—Å—Å–∫–∏–π
    if lang not in ['ru', 'uk', 'en']:
        lang = 'ru'

    help_texts = {
        'ru': """
üìå <b>–ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é SE1DHE Bot</b>

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤—ã–±—Ä–∞—Ç—å –∏ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ Telegram-–±–æ—Ç–∞ –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–¥–∞—á.

<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>
‚Ä¢ /start - –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
‚Ä¢ /help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚Ä¢ /catalog - –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É –±–æ—Ç–æ–≤
‚Ä¢ /cart - –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫–æ—Ä–∑–∏–Ω–µ
‚Ä¢ /settings - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

<b>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:</b>
1. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
2. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –∫–æ—Ä–∑–∏–Ω—É
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∑–∞–∫–∞–∑–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ
5. –ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É!

<b>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</b>
–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /support –¥–ª—è —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π.
""",
        'uk': """
üìå <b>–î–æ–ø–æ–º–æ–≥–∞ –ø–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é SE1DHE Bot</b>

–¶–µ–π –±–æ—Ç –¥–æ–ø–æ–º–æ–∂–µ –≤–∞–º –≤–∏–±—Ä–∞—Ç–∏ —Ç–∞ –ø—Ä–∏–¥–±–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞ –¥–ª—è –≤–∞—à–∏—Ö –∑–∞–≤–¥–∞–Ω—å.

<b>–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:</b>
‚Ä¢ /start - –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
‚Ä¢ /help - –ø–æ–∫–∞–∑–∞—Ç–∏ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚Ä¢ /catalog - –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É –±–æ—Ç—ñ–≤
‚Ä¢ /cart - –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞
‚Ä¢ /settings - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

<b>–Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è:</b>
1. –í–∏–±–µ—Ä—ñ—Ç—å –±–æ—Ç–∞ –∑ –∫–∞—Ç–∞–ª–æ–≥—É
2. –î–æ–¥–∞–π—Ç–µ –π–æ–≥–æ –¥–æ –∫–æ—à–∏–∫–∞
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
4. –í–∏–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏ —Ç–∞ –æ–ø–ª–∞—Ç—ñ—Ç—å
5. –û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –±–æ—Ç–∞!

<b>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:</b>
–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /support –¥–ª—è –∑–≤'—è–∑–∫—É –∑ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é.
""",
        'en': """
üìå <b>SE1DHE Bot Usage Help</b>

This bot will help you choose and purchase a suitable Telegram bot for your tasks.

<b>Main commands:</b>
‚Ä¢ /start - start the bot
‚Ä¢ /help - show this message
‚Ä¢ /catalog - go to the bot catalog
‚Ä¢ /cart - go to your cart
‚Ä¢ /settings - settings

<b>How to use:</b>
1. Choose a bot from the catalog
2. Add it to your cart
3. Proceed to checkout
4. Choose a payment method and pay
5. Get access to the bot!

<b>Support:</b>
If you have any questions, use the /support command to contact the administration.
"""
    }

    return help_texts.get(lang, help_texts['ru'])


def register_help_handlers(dp: Dispatcher):
    """
    –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help

    Args:
        dp (Dispatcher): –î–∏—Å–ø–µ—Ç—á–µ—Ä –±–æ—Ç–∞
    """
    dp.message.register(cmd_help, Command("help"))